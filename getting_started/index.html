<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Getting Started - seq2seq</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting Started";
    var mkdocs_page_input_path = "getting_started.md";
    var mkdocs_page_url = "/getting_started/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> seq2seq</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Overview</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Getting Started</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#download-setup">Download &amp; Setup</a></li>
                
            
                <li class="toctree-l3"><a href="#using-a-pre-trained-model">Using a pre-trained model</a></li>
                
            
                <li class="toctree-l3"><a href="#training-your-own-model">Training your own model</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../data/">Data</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../models/">Models</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../training/">Training</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../inference/">Inference</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../benchmarks/">Results and Pre-Trained Models</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../profiling/">Profiling</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../developer_guide/">Developer Guide</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">seq2seq</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="download-setup">Download &amp; Setup</h2>
<p>To use [seq2seq] you need a working installation of Tensorflow with
Python 2.7 or Python 3.5. Follow the <a href="https://www.tensorflow.org/get_started/os_setup">Tensorflow Getting Started</a>
for detailed setup instructions. With Tensorflow installed, you can clone this repository:</p>
<pre><code class="bash">git clone https://github.com/dennybritz/seq2seq.git
cd seq2seq
</code></pre>

<p>To make sure everything works as expect you can run a simple training test:</p>
<pre><code class="bash">./test/train_infer_test.sh
</code></pre>

<p>If you see a "success" message you are all set. If you run into setup issues
please <a href="https://github.com/dennybritz/seq2seq/issues">file a Github issue</a>.</p>
<h2 id="using-a-pre-trained-model">Using a pre-trained model</h2>
<p>Training sequence models can take a long time. For example, training a model to
translate from English to German takes several days on a modern GPU (you can speed this up by using distributed training). If all you want is <em>use</em> a model that has already been trained check out the <a href="../models/">models</a> page. Let's use a model that has been trained to translate from English to German.</p>
<pre><code class="bash"># Download the trained model
MODEL_DIR=${TMPDIR}/en_de_pretrained
wget TODO

# Create an input file with English sentences to feed to the model
# Note: The input must be tokenized. See the data section for more info.
echo &quot;What is your name ?&quot; &gt; $TMPDIR/test.en

# Call the model inference script
./bin/infer.py \
  --source $TMPDIR/test.en \
  --vocab_source $MODEL_DIR/vocab.en \
  --vocab_target $MODEL_DIR/vocab.de \
  --model AttentionSeq2Seq \
  --model_dir $MODEL_DIR

# You should see German output: TODO
</code></pre>

<h2 id="training-your-own-model">Training your own model</h2>
<p>Let's now look at how you can train a model based on your own data. In this section we will train a model that learns to reverse the input sequence. While this task is not very useful in practice the training time for it is rather short and it serves as a good way to demonstrate and sanity-check that everything is working as intended.</p>
<p>Fist, let's generate some data:</p>
<pre><code class="bash">DATA_TYPE=revsere tools/data/toy.sh
</code></pre>

<p>To train a new model we will use the following files that were generated by the above script. To use your own data you will need the same corresponding files.</p>
<table>
<thead>
<tr>
<th>Argument Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>train_source</code></td>
<td>The input sequences. A plain text file where each line corresponds to one input example, and tokens/words are separated by spaces. For natural language data you may need to use a tokenizer to generate this. See <a href="../tools/">tools</a> for more details.</td>
</tr>
<tr>
<td><code>train_target</code></td>
<td>The targets sequences in the same format as <code>train_target</code>. Each line corresponds to the "translation" of the input sequence in the same line in <code>train_target</code>. Thus, the number of lines in these two files must be equal.</td>
</tr>
<tr>
<td><code>dev_source</code></td>
<td>Same as <code>train_source</code> but used as a validation/development set.</td>
</tr>
<tr>
<td><code>dev_target</code></td>
<td>Same as <code>train_target</code> but used as a validation/development set.</td>
</tr>
<tr>
<td><code>vocab_source</code></td>
<td>The vocabulary for the source sequences. A plain text file that contains one word per line. All words that appear in the source text but are not in the vocabulary will be mapped to <code>UNK</code> (unknown) tokens. We provide a script to generate a vocabulary file. See <a href="../tools/">tools</a> for more details.</td>
</tr>
<tr>
<td><code>vocab_target</code></td>
<td>Same as <code>vocab_source</code> but for the target sequences.</td>
</tr>
</tbody>
</table>
<p>With the above input files you can now train a new model:</p>
<pre><code class="bash">./bin/train.py \
  --train_source $HOME/nmt_data/toy_reverse/train/sources.txt \
  --train_target $HOME/nmt_data/toy_reverse/train/targets.txt \
  --dev_source $HOME/nmt_data/toy_reverse/dev/sources.txt \
  --dev_target $HOME/nmt_data/toy_reverse/dev/targets.txt \
  --vocab_source $HOME/nmt_data/toy_reverse/train/vocab.txt \
  --vocab_target $HOME/nmt_data/toy_reverse/train/vocab.txt \
  --model AttentionSeq2Seq \
  --batch_size 32 \
  --train_epochs 5 \
  --output_dir ${TMPDIR}/nmt_toy_reverse
</code></pre>

<p>On a CPU the training may take up to 15 minutes. With the trained model you can now perform inference:</p>
<pre><code class="bash">./bin/infer.py \
  --source $HOME/nmt_data/toy_reverse/test/sources.txt \
  --vocab_source $HOME/nmt_data/toy_reverse/train/vocab.txt \
  --vocab_target $HOME/nmt_data/toy_reverse/train/vocab.txt \
  --model AttentionSeq2Seq \
  --model_dir ${TMPDIR}/nmt_toy_reverse \
  &gt; ${TMPDIR}/nmt_toy_reverse/predictions.txt

# Evaluate BLEU score using multi-bleu script from MOSES
./bin/multi-bleu.perl $HOME/nmt_data/toy_reverse/test/targets.txt &lt; ${TMPDIR}/nmt_toy_reverse/predictions.txt
</code></pre>

<p>You can learn more about available models, data and tools by browsing the documentation.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../data/" class="btn btn-neutral float-right" title="Data">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../data/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
